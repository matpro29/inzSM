{% extends 'base.html.twig' %}

{% block title %}Użytkownik{% endblock %}

{% block body %}
    <style>
        .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
        .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    </style>

    <div class="example-wrapper">
        <h1>Użytkownik ✅</h1>
        <table>
            <tbody>
            <tr>
                <th>Id</th>
                <td>{{ userInfo.id }}</td>
            </tr>
            <tr>
                <th>Użytkownik</th>
                <td>{{ userInfo.username }}</td>
            </tr>
            <tr>
                <th>Role</th>
                <td>{{ userInfo.roles ? userInfo.roles|join(', ') : '' }}</td>
            </tr>
            <tr>
                <th>Hasło</th>
                <td>{{ userInfo.password }}</td>
            </tr>
            </tbody>
        </table>
        </br>
        {% for section in course.sections %}
            <h1>{{ section.name }}</h1>
            {% for grade in section.grades %}
                {% if grade.user.id == userInfo.id %}
                    {{ grade.grade.grade }}
                {% else %}
                    <a href="{{ path('course_user_grade_new', {'sectionId': section.id, 'userId': userInfo.id}) }}">Dodaj ocenę cząstkową</a>
                {% endif %}
            {% endfor %}
            {% for task in section.tasks %}
                <h3>{{ task.name }}</h3>
                {% for file in task.files %}
                    {% if userInfo.id == file.user.id %}
                        <a href="{{ asset('files/' ~ file.file) }}">{{ file.name }}</a>
                        </br>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        {% endfor %}
        </br>
        <a href="{{ path('course_user_grade_end', {'courseId': course.id, 'userId': userInfo.id}) }}">Dodaj ocenę końcową</a>
        </br>
        <a href="{{ path('course_user', {'id': course.id}) }}">Wróć</a>
    </div>
{% endblock %}
